{% extends "base.html" %}

{% block content %}
<main class="min-h-screen bg-white p-4 sm:p-6 lg:p-8">

  <!-- Header -->
  <div class="max-w-7xl mx-auto mb-8 text-center ">
    <h1 class="text-4xl md:text-5xl font-bold text-white mb-2">Recipe Analytics</h1>
    <p class="text-xl text-white/80">Track your culinary content performance</p>
  </div>

  <div class="max-w-7xl mx-auto space-y-8">
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Total Recipes -->
      <div class="bg-white/90 backdrop-blur-lg border border-white/20 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <div class="text-center">
          <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-orange-400 to-red-500 rounded-full mb-4">
            <i class="bi bi-journal-text text-2xl text-white"></i>
          </div>
          <h2 class="text-lg font-semibold text-gray-700 mb-2">Total Recipes</h2>
          <p class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-600">
            1,247
          </p>
          <div class="mt-4 flex items-center justify-center text-sm">
            <span class="text-green-500 font-medium">â†— +12%</span>
            <span class="text-gray-500 ml-1">this month</span>
          </div>
        </div>
      </div>

      <!-- Most Viewed Recipes -->
      <div class="bg-white/90 backdrop-blur-lg border border-white/20 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <div class="flex items-center mb-6">
          <div class="inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-blue-400 to-purple-500 rounded-lg mr-4">
            <i class="bi bi-eye text-xl text-white"></i>
          </div>
          <h2 class="text-xl font-bold text-gray-800">Most Viewed Recipes</h2>
        </div>
        <div class="space-y-4">
          <div class="flex justify-between items-center p-3 bg-white/50 rounded-xl border-l-4 border-orange-400">
            <span class="font-semibold text-gray-800">Chocolate Chip Cookies</span>
            <span class="font-bold text-gray-700 bg-orange-100 px-3 py-1 rounded-full">15.2K</span>
          </div>
          <div class="flex justify-between items-center p-3 bg-white/50 rounded-xl border-l-4 border-blue-400">
            <span class="font-semibold text-gray-800">Pasta Carbonara</span>
            <span class="font-bold text-gray-700 bg-blue-100 px-3 py-1 rounded-full">12.8K</span>
          </div>
          <div class="flex justify-between items-center p-3 bg-white/50 rounded-xl border-l-4 border-purple-400">
            <span class="font-semibold text-gray-800">Chicken Tikka Masala</span>
            <span class="font-bold text-gray-700 bg-purple-100 px-3 py-1 rounded-full">11.5K</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Recipes by Category (Bar Chart) -->
      <div class="bg-white/90 backdrop-blur-lg border border-white/20 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <div class="flex items-center mb-6">
          <div class="inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-green-400 to-emerald-500 rounded-lg mr-4">
            <i class="bi bi-bar-chart-fill text-xl text-white"></i>
          </div>
          <h2 class="text-xl font-bold text-gray-800">Recipes by Category</h2>
        </div>
        <div class="relative h-72">
          <canvas id="categoryChart"></canvas>
        </div>
      </div>

      <!-- Popular Searches (Pie Chart) -->
      <div class="bg-white/90 backdrop-blur-lg border border-white/20 p-8 rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1">
        <div class="flex items-center mb-6">
          <div class="inline-flex items-center justify-center w-12 h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-lg mr-4">
            <i class="bi bi-search text-xl text-white"></i>
          </div>
          <h2 class="text-xl font-bold text-gray-800">Popular Searches</h2>
        </div>
        <div class="relative h-72">
          <canvas id="searchChart"></canvas>
        </div>
      </div>
    </div>
  </div>
</main>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const categories = [
    ['Desserts', 324],
    ['Main Dishes', 298],
    ['Appetizers', 186],
    ['Salads', 147],
    ['Soups', 125],
    ['Beverages', 92]
  ];

  const popularSearches = [
    ['Chocolate', 2340],
    ['Chicken', 1890],
    ['Pasta', 1654],
    ['Vegetarian', 1234],
    ['Quick Meals', 987]
  ];

  // Category Chart (Bar)
  new Chart(document.getElementById('categoryChart'), {
    type: 'bar',
    data: {
      labels: categories.map(c => c[0]),
      datasets: [{
        label: 'Recipes',
        data: categories.map(c => c[1]),
        backgroundColor: ['#f97316','#3b82f6','#22c55e','#a855f7','#ec4899','#eab308'],
        borderWidth: 2,
        borderRadius: 6,
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } },
      scales: {
        y: { beginAtZero: true, ticks: { color: '#6B7280' } },
        x: { ticks: { color: '#6B7280' } }
      }
    }
  });

  // Popular Searches (Pie)
  new Chart(document.getElementById('searchChart'), {
    type: 'doughnut',
    data: {
      labels: popularSearches.map(s => s[0]),
      datasets: [{
        data: popularSearches.map(s => s[1]),
        backgroundColor: ['#f97316','#22c55e','#3b82f6','#a855f7','#ec4899'],
        borderColor: '#fff',
        borderWidth: 3
      }]
    },
    options: {
      responsive: true,
      cutout: '60%',
      plugins: {
        legend: {
          position: 'bottom',
          labels: { usePointStyle: true, padding: 16 }
        }
      }
    }
  });
</script>
{% endblock %}